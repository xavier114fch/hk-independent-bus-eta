(self.webpackChunkhk_independent_bus_eta=self.webpackChunkhk_independent_bus_eta||[]).push([[922],{9922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(7313),o=r(7829),i=r(1113),l=r(2392),s=r(9099),a=r(4511),c=r(8467),u=r(9504),d=r(1171),f=r(6417);const p=(0,d.Z)((0,f.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var v=r(2061),h=r.n(v),m=r(6060),y=r(5823);const g=()=>{const{data:e}=(0,c.UO)(),{t:t}=(0,a.$)(),{importAppState:r,importCollectionState:d}=(0,n.useContext)(m.ZP),v=(0,c.s0)(),[g,w]=(0,n.useState)(null!==e&&void 0!==e?e:""),x=(0,n.useMemo)((()=>h()((e=>{try{return JSON.parse((0,u.decompress)(decodeURIComponent(e),{inputEncoding:"Base64"}))}catch(t){return{}}}),500)),[]),S=(0,n.useMemo)((()=>{try{let t=x(null!==e&&void 0!==e?e:g.split("/").pop());if(!Array.isArray(t.savedStops)||!(0,y.Mp)(t.savedStops))throw new Error("Error in parsing savedStops");if(!Array.isArray(t.savedEtas)||!(0,y.Mp)(t.savedEtas))throw new Error("Error in parsing savedEtas");if(!Array.isArray(t.collections))throw new Error("Error in parsing collections");for(let e=0;e<t.collections.length;++e){if("string"!==typeof t.collections[e].name)throw new Error("Error in parsing collections");for(let r=0;r<t.collections[e].list.length;++r)if("string"!==typeof t.collections[e].list[r])throw new Error("Error in parsing collections");for(let r=0;r<t.collections[e].schedules.length;++r){if("number"!==typeof t.collections[e].schedules[r].day)throw new Error("Error in parsing collections");if("number"!==typeof t.collections[e].schedules[r].start.hour)throw new Error("Error in parsing collections");if("number"!==typeof t.collections[e].schedules[r].start.minute)throw new Error("Error in parsing collections");if("number"!==typeof t.collections[e].schedules[r].end.hour)throw new Error("Error in parsing collections");if("number"!==typeof t.collections[e].schedules[r].end.minute)throw new Error("Error in parsing collections")}}return t}catch(t){console.error(t)}return{}}),[x,e,g]),j=(0,n.useMemo)((()=>JSON.stringify(S,null,2)),[S]),O=(0,n.useCallback)((()=>{var e,t,n,o,i,l,s,a,c,u,f,p,h,m,y,g;"{}"!==j&&(d({savedStops:null!==(e=S.savedStops)&&void 0!==e?e:[],savedEtas:null!==(t=S.savedEtas)&&void 0!==t?t:[],collections:null!==(n=S.collections)&&void 0!==n?n:[],collectionDrawerRoute:null,collectionIdx:null}),r({geoPermission:null,compassPermission:"default",geolocation:{lat:22.302711,lng:114.177216},searchRoute:"",selectedRoute:"1-1-CHUK-YUEN-ESTATE-STAR-FERRY",routeSearchHistory:null!==(o=S.routeSearchHistory)&&void 0!==o?o:[],isRouteFilter:null===(i=S.isRouteFilter)||void 0===i||i,busSortOrder:null!==(l=S.busSortOrder)&&void 0!==l?l:"KMB first",numPadOrder:null!==(s=S.numPadOrder)&&void 0!==s?s:"123456789c0b",etaFormat:null!==(a=S.etaFormat)&&void 0!==a?a:"diff",_colorMode:null!==(c=S._colorMode)&&void 0!==c?c:"system",energyMode:null!==(u=S.energyMode)&&void 0!==u&&u,vibrateDuration:null!==(f=S.vibrateDuration)&&void 0!==f?f:1,isVisible:!0,analytics:null===(p=S.analytics)||void 0===p||p,refreshInterval:null!==(h=S.refreshInterval)&&void 0!==h?h:30,annotateScheduled:null===(m=S.annotateScheduled)||void 0===m||m,isRecentSearchShown:null===(y=S.isRecentSearchShown)||void 0===y||y,fontSize:null!==(g=S.fontSize)&&void 0!==g?g:16}),v("/"))}),[S,j,r,d,v]);return(0,f.jsxs)(o.Z,{sx:b,children:[(0,f.jsx)(i.Z,{variant:"h6",sx:{textAlign:"center"},children:t("\u8cc7\u6599\u532f\u5165")}),!e&&(0,f.jsx)(l.Z,{variant:"outlined",value:g,onChange:e=>{let{target:{value:t}}=e;return w(t)},fullWidth:!0,label:t("\u532f\u51fa\u7db2\u5740")}),(0,f.jsx)(l.Z,{multiline:!0,maxRows:15,value:j,disabled:!0,fullWidth:!0,spellCheck:!1}),(0,f.jsx)(s.Z,{startIcon:(0,f.jsx)(p,{}),variant:"outlined",disabled:"{}"===j,onClick:O,sx:E,children:t("Accept")})]})},b={display:"flex",flexDirection:"column",justifyContent:"flex-start",flex:1,gap:1},E={color:e=>"light"===e.palette.mode?e.palette.text.primary:e.palette.primary.main,borderColor:e=>"light"===e.palette.mode?e.palette.text.primary:e.palette.primary.main}},2061:(e,t,r)=>{var n="Expected a function",o=NaN,i="[object Symbol]",l=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,d="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,f="object"==typeof self&&self&&self.Object===Object&&self,p=d||f||Function("return this")(),v=Object.prototype.toString,h=Math.max,m=Math.min,y=function(){return p.Date.now()};function g(e,t,r){var o,i,l,s,a,c,u=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function v(t){var r=o,n=i;return o=i=void 0,u=t,s=e.apply(n,r)}function g(e){var r=e-c;return void 0===c||r>=t||r<0||f&&e-u>=l}function w(){var e=y();if(g(e))return x(e);a=setTimeout(w,function(e){var r=t-(e-c);return f?m(r,l-(e-u)):r}(e))}function x(e){return a=void 0,p&&o?v(e):(o=i=void 0,s)}function S(){var e=y(),r=g(e);if(o=arguments,i=this,c=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(w,t),d?v(e):s}(c);if(f)return a=setTimeout(w,t),v(c)}return void 0===a&&(a=setTimeout(w,t)),s}return t=E(t)||0,b(r)&&(d=!!r.leading,l=(f="maxWait"in r)?h(E(r.maxWait)||0,t):l,p="trailing"in r?!!r.trailing:p),S.cancel=function(){void 0!==a&&clearTimeout(a),u=0,o=c=i=a=void 0},S.flush=function(){return void 0===a?s:x(y())},S}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&v.call(e)==i}(e))return o;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var r=a.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):s.test(e)?o:+e}e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(n);return b(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),g(e,t,{leading:o,maxWait:t,trailing:i})}}}]);