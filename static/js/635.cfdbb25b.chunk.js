"use strict";(self.webpackChunkhk_independent_bus_eta=self.webpackChunkhk_independent_bus_eta||[]).push([[635],{421:(e,t,n)=>{n.d(t,{D:()=>l,u:()=>c});var a=n(7313),o=n(9176),r=n(5281),s=n(6417);const c=a.forwardRef(((e,t)=>{let{sx:n,color:a,...r}=e;return(0,s.jsx)(o.Z,{color:null!==a&&void 0!==a?a:"inherit",sx:{m:1,height:5,borderRadius:5,...n},ref:t,...r})})),l=a.forwardRef(((e,t)=>{let{sx:n,color:a,...o}=e;return(0,s.jsx)(r.Z,{color:null!==a&&void 0!==a?a:"inherit",sx:{m:1,...n},ref:t,...o})}))},1268:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7829),o=n(5309),r=n(9980),s=n(7313),c=n(6060),l=n(6417);const i=()=>{const{compassPermission:e,setCompassPermission:t}=(0,s.useContext)(c.ZP),n=(0,s.useCallback)((()=>{(0,r.ZK)().then((e=>{t(e)}))}),[t]);return r.G6&&"granted"!==e?(0,l.jsx)("div",{className:"leaflet-bottom leaflet-right",children:(0,l.jsx)(a.Z,{sx:d,className:"leaflet-control leaflet-bar",onClick:n,children:(0,l.jsx)(o.Z,{sx:{p:"3px",color:"black"}})})}):(0,l.jsx)(l.Fragment,{})},d={background:"white",width:32,height:32,marginBottom:"57px !important",marginRight:"5px !important",display:"flex",justifyContent:"center",alignItems:"center"}},8379:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(7313),o=n(6060),r=n(5823),s=n(9062),c=n(5594),l=n(7248),i=n.n(l),d=n(9980),u=(n(7686),n(6417));const p=(0,a.forwardRef)(((e,t)=>{let{children:n,...o}=e;const r=(0,a.useRef)(null),c=(0,d.ZP)(100),[l,i]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=e=>{try{const t=JSON.parse(e.data);"compass"===(null===t||void 0===t?void 0:t.type)&&i({degree:t.degree,accuracy:t.accuracy})}catch(t){}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,a.useEffect)((()=>{i(c)}),[c]),(0,a.useEffect)((()=>{const e=r.current;e&&l&&(e.setRotationAngle(360-l.degree),e.setRotationOrigin("center"))}),[l]),null===l?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(s.J,{ref:e=>{r.current=e,t&&(t.current=e)},...o,children:n})})),g=()=>{const{geolocation:e,geoPermission:t}=(0,a.useContext)(o.ZP),n=(0,a.useMemo)((()=>m()),[]);return"granted"!==t?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.C,{center:(0,r.bf)(e),radius:25}),(0,u.jsx)(p,{rotationOrigin:"center",icon:n,position:(0,r.bf)(e)},"rotated-marker")]})},m=()=>i().divIcon({iconSize:[20,20],iconAnchor:[10,10],className:"self-center"})},3310:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(7313),o=n(7829),r=n(1113),s=n(4511),c=n(6060),l=n(9119),i=n(421),d=n(5823),u=n(6417);const p=e=>{let{eta:{eta:t,remark:n,co:l,dest:i},routeDests:d,showCompany:p}=e;const{t:m,i18n:{language:h}}=(0,s.$)(),{etaFormat:f}=(0,a.useContext)(c.ZP),j=(0,a.useMemo)((()=>{for(const e of d){if(e.en.toLowerCase()===i.en.toLowerCase())return!1;if(e.zh===i.zh)return!1}return!0}),[d,i]),b=Math.round((new Date(t).getTime()-(new Date).getTime())/60/1e3),v=(0,u.jsx)(o.Z,{component:"span",sx:"exact"!==f?{fontSize:"0.9em"}:{},children:t.slice(11,16)}),k=(0,u.jsxs)(o.Z,{component:"span",children:[(0,u.jsx)(o.Z,{component:"span",sx:{...x,color:e=>e.palette.warning.main},children:b<1?" - ":"".concat(b," ")}),(0,u.jsx)(o.Z,{component:"span",sx:{fontSize:"0.8em"},children:m("\u5206\u9418")})]});return(0,u.jsxs)(r.Z,{variant:"subtitle1",children:["diff"===f&&k,"exact"===f&&v,"mixed"===f&&(0,u.jsxs)(u.Fragment,{children:[v,"\u2003",k]}),"\u2003-\xa0",(0,u.jsxs)(o.Z,{component:"span",sx:{fontSize:"0.8em",textOverflow:"ellipsis"},children:[p&&(0,u.jsxs)(u.Fragment,{children:["\u2003",m(l)]}),"\u2003",g(n[h],h),"\u2003",j&&i[h]]})]})},g=(e,t)=>{if(null===e)return"";const n=[...e.matchAll("zh"===t?/(\d+)\u865f\u6708\u53f0/g:/Platform (\d+)/g)][0]||[];return 2===n.length&&n[1].length&&(e=d.iw[n[1]]),"zh"===t?e.replace(/\u25ad\u25ad/g,"\u96d9\u5361").replace(/\u25ad/g,"\u55ae\u5361"):e.replace(/\u25ad\u25ad/g,"Duel").replace(/\u25ad/g,"Single")},m=e=>{let{routeId:t,seq:n,containerSx:d,showStopName:g=!1}=e;const{t:m,i18n:{language:x}}=(0,s.$)(),{db:{routeList:h,stopList:f}}=(0,a.useContext)(c.ZP),j=(0,l.e)("".concat(t,"/").concat(n)),b=Object.values(h[t].stops)[0][n],v=(0,a.useMemo)((()=>Object.values(h[t].stops).map((e=>f[e[e.length-1]].name)).concat(h[t].dest)),[h,t,f]);return null==j?(0,u.jsx)(o.Z,{sx:d,children:(0,u.jsx)(i.u,{})}):(0,u.jsxs)(o.Z,{sx:d,children:[g&&(0,u.jsx)(r.Z,{variant:"caption",children:f[b].name[x]}),0===j.length&&m("\u672a\u6709\u73ed\u6b21\u8cc7\u6599"),j.length>0&&j.map(((e,n)=>(0,u.jsx)(p,{eta:e,routeDests:v,showCompany:h[t].co.length>1},"route-".concat(n))))]})},x={fontWeight:"700",color:"#088bce"}},1635:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var a=n(7313),o=n(501),r=n(7829),s=n(1113),c=n(9536),l=n(6060),i=n(5640),d=n(4511),u=n(936),p=n.n(u),g=n(3457),m=n(7592),x=n(8151),h=n(6417);const f=async(e,t)=>{if(!e)return new Promise((e=>e([])));return(await fetch("https://geodata.gov.hk/gs/api/v1.0.0/locationSearch?q=".concat(encodeURI(e)),t).then((e=>e.json()))).map((e=>{const[t,n]=(0,x.Z)("+proj=tmerc +lat_0=22.31213333333334 +lon_0=114.1785555555556 +k=1 +x_0=836694.05 +y_0=819069.8 +ellps=intl +towgs84=-162.619,-276.959,-161.764,0.067753,-2.24365,-1.15883,-1.09425 +units=m +no_defs","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",[e.x,e.y]);return{address:{zh:e.addressZH,en:e.addressEN},name:{zh:e.nameZH,en:e.nameEN},lat:n,lng:t}}))},j=e=>{let{placeholder:t="",onChange:n,stopList:o,value:r}=e;const{t:s,i18n:c}=(0,d.$)(),l=(0,a.useRef)(new AbortController),i=(0,a.useRef)(p()(((e,t)=>{const n=Object.values(o).filter((t=>t.name.zh.includes(e)||t.name.en.toLowerCase().includes(e.toLowerCase()))).map((e=>({label:"".concat(e.name[c.language]," - ").concat(s("\u8eca\u7ad9")),location:e.location}))).slice(0,10);l.current.abort(),l.current=new AbortController,f(e,{signal:l.current.signal}).then((e=>{t(n.concat(e.map((e=>{let{name:t,address:n,lat:a,lng:o}=e;return{label:[t[c.language],n[c.language]].filter((e=>e)).join(" - "),location:{lat:a,lng:o}}}))))}))}),200)).current;return(0,h.jsx)(b,{isClearable:!0,value:r,loadOptions:i,placeholder:t,onChange:n,classNamePrefix:"react-select"})},b=(0,m.ZP)(g.Z)((e=>{let{theme:t}=e;return{".react-select__control":{background:"".concat("dark"===t.palette.mode?t.palette.background.default:"white"," !important"),border:"none !important",borderRadius:"unset !important",borderBottom:"1px hsl(0, 0%, 80%) solid !important"},".react-select__input":{color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")},".react-select__valueContainer":{color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")},".react-select__single-value":{color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")},".react-select__option:hover":{filter:"grayscale(1) !important"},".react-select__option--is-focused":{background:"".concat("dark"===t.palette.mode?t.palette.background.default:"white"," !important")},".react-select__option--is-selected":{background:"".concat("dark"===t.palette.mode?t.palette.background.default:"white"," !important"),color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")},".react-select__menu":{background:"".concat("dark"===t.palette.mode?t.palette.background.default:"white"," !important"),color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")},".react-select__meauList":{background:"".concat("dark"===t.palette.mode?t.palette.background.default:"white"," !important"),color:"".concat("dark"===t.palette.mode?t.palette.primary.main:t.palette.text.primary," !important")}}}));var v=n(3171),k=n(8492),w=n(3213),Z=n(1872),C=n(9530),y=n(3310);const I=e=>{let{routes:t,idx:n,handleRouteClick:o,expanded:r,stopIdx:c}=e;const{db:{routeList:i,stopList:u}}=(0,a.useContext)(l.ZP),{t:p,i18n:g}=(0,d.$)();return(0,h.jsxs)(v.Z,{TransitionProps:{unmountOnExit:!0},sx:S,onChange:()=>o(n),expanded:r,children:[(0,h.jsx)(k.Z,{sx:L,children:(0,h.jsx)(w.Z,{primary:t.map(((e,t)=>{const{routeId:a}=e,{route:o,serviceType:r}=i[a];return(0,h.jsxs)("span",{children:[(0,h.jsx)(C.Z,{routeNo:o}),parseInt(r,10)>=2&&(0,h.jsx)(s.Z,{variant:"caption",children:p("\u7279\u5225\u73ed")})]},"search-".concat(n,"-").concat(t))})),secondary:(e=>{const t=[];e.forEach((e=>{const{routeId:n,on:a}=e,{fares:o,stops:r}=i[n];t.push(u[Object.values(r).sort(((e,t)=>t.length-e.length))[0][a]].name[g.language]+(o?" ($".concat(o[a],")"):""))}));const{routeId:n,off:a}=e[e.length-1],{stops:o}=i[n];return t.concat(u[Object.values(o).sort(((e,t)=>t.length-e.length))[0][a]].name[g.language]).join(" \u2192 ")})(t),sx:P})}),(0,h.jsx)(Z.Z,{sx:_,children:t.map(((e,t)=>(0,h.jsx)(y.Z,{routeId:e.routeId.toUpperCase(),seq:e.on+(c?c[t]:0),containerSx:R,showStopName:!0},"timereport-".concat(n,"-").concat(t))))})]})},S={border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&.Mui-expanded":{margin:"auto"}},L={backgroundColor:e=>"dark"===e.palette.mode?e.palette.background.default:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:44,"&.Mui-expanded":{minHeight:44},"& .MuiAccordionSummary-content":{margin:"8px 0",flexDirection:"column","&.Mui-expanded":{margin:"8px 0"}}},_={px:e=>e.spacing(2),py:e=>e.spacing(1),display:"flex"},R={width:"50%"},P={"& .MuiListItemText-primary > span":{width:"50%",display:"inline-block","& > span":{fontSize:"0.6rem",marginLeft:"8px"}}};var O=n(4536),F=n(9062),M=n(8817),z=n(4580),N=n(8153),E=n(7248),T=n.n(E),A=n(7308),D=n(5823),B=n(8379),$=n(1268);const W=e=>{let{center:t,start:n,end:a}=e;const o=(0,O.Sx)();return t?o.flyTo((0,D.bf)(t)):a&&o.fitBounds(T().latLngBounds(T().latLng(n.lat,n.lng),T().latLng(a.lat,a.lng))),(0,h.jsx)(h.Fragment,{})},q=e=>{let{start:t}=e;return t?(0,h.jsx)(F.J,{position:t,icon:V({isStart:!0})}):null},G=e=>{let{end:t}=e;return t?(0,h.jsx)(F.J,{position:t,icon:V({isStart:!1})}):null},H=e=>{let{onClick:t}=e;return(0,h.jsx)("div",{className:"leaflet-bottom leaflet-right",children:(0,h.jsx)(r.Z,{sx:ne,className:"leaflet-control leaflet-bar",onClick:t,children:(0,h.jsx)(A.Z,{className:ee.centralControl})})})},J=e=>{let{route:{routeId:t,on:n,off:o},lv:r,stopIdx:s,onMarkerClick:c}=e;const{db:{routeList:i,stopList:u}}=(0,a.useContext)(l.ZP),{i18n:p}=(0,d.$)(),g=Object.values(i[t].stops).sort(((e,t)=>t.length-e.length))[0].slice(n,o+1),m=t.split("-")[0];return(0,h.jsxs)(h.Fragment,{children:[g.map(((e,n)=>(0,h.jsx)(F.J,{position:u[e].location,icon:Q({active:s===n,passed:n<s,lv:r}),alt:"".concat(n,". ").concat(m," - ").concat(u[e].name[p.language]),eventHandlers:{click:e=>{c(t,n)}}},"".concat(e,"-").concat(n)))),g.slice(1).map(((e,t)=>(0,h.jsx)(M.a,{positions:[K(u[g[t]].location),K(u[e].location)],color:0===r?"#FF9090":"#d0b708"},"".concat(e,"-line"))))]})},U=e=>{let{routes:t,start:n,end:o}=e;const{db:{routeList:r,stopList:s}}=(0,a.useContext)(l.ZP),c=[],i=[];if(!n||!o)return(0,h.jsx)(h.Fragment,{});i.push(n),(t||[]).forEach((e=>{let{routeId:t,on:n,off:a}=e;const o=Object.values(r[t].stops).sort(((e,t)=>t.length-e.length))[0];i.push(s[o[n]].location),i.push(s[o[a]].location)})),i.push(o||n);for(var d=0;d<i.length/2;++d)c.push([i[2*d],i[2*d+1]]);return(0,h.jsx)(h.Fragment,{children:c.map(((e,t)=>(0,h.jsx)(M.a,{positions:[K(e[0]),K(e[1])],color:"green"},"line-".concat(t))))})},Y=e=>{let{routes:t,start:n,end:o,stopIdx:s,onMarkerClick:c}=e;const{geolocation:i,geoPermission:d,updateGeoPermission:u,colorMode:p}=(0,a.useContext)(l.ZP),[g,m]=(0,a.useState)({center:null,isFollow:!1}),{center:x,isFollow:f}=g,[j,b]=(0,a.useState)(null),v=(0,a.useCallback)((e=>{const{center:t,isFollow:n}=null!==e&&void 0!==e?e:{};m({center:t||(null===j||void 0===j?void 0:j.getCenter()),isFollow:n||!1})}),[m]);return(0,a.useEffect)((()=>{if(j){const e=()=>{v({center:j.getCenter()})};return j.on({dragend:e}),()=>{j.off({dragend:e})}}}),[j,v]),(0,a.useEffect)((()=>{f&&(x&&i.lat===x.lat&&i.lng===x.lng||v({center:i,isFollow:!0}))}),[i,x,f,v]),(0,h.jsx)(r.Z,{sx:te,children:(0,h.jsxs)(z.h,{center:x||(n&&o?{lat:(n.lat+o.lat)/2,lng:(n.lng+o.lng)/2}:(0,D.bf)(n)),zoom:16,scrollWheelZoom:!1,className:ee.mapContainer,ref:b,children:[(0,h.jsx)(W,{center:x,start:(0,D.bf)(n),end:o}),(0,h.jsx)(N.I,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"dark"===p?"https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png":"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),(t||[]).map(((e,t)=>(0,h.jsx)(J,{route:e,lv:t,stopIdx:s[t],onMarkerClick:c},"route-".concat(t)))),(0,h.jsx)(U,{routes:t,start:n,end:o}),(0,h.jsx)(B.Z,{}),(0,h.jsx)(q,{start:n}),(0,h.jsx)(G,{end:o}),(0,h.jsx)(H,{onClick:()=>{"granted"===d?v({isFollow:!0}):"denied"!==d&&(v({isFollow:!0}),u("opening"))}}),(0,h.jsx)($.Z,{})]})})},K=e=>{let{lat:t,lng:n}=e;return[t,n]},Q=e=>{let{active:t,passed:n,lv:a}=e;return T().icon({iconUrl:"https://unpkg.com/leaflet@1.0.1/dist/images/marker-icon-2x.png",className:"".concat(ee.marker," ").concat(t?ee.active:""," ").concat(n?ee.passed:""," lv-").concat(a)})},V=e=>{let{isStart:t}=e;return T().icon({iconUrl:"https://unpkg.com/leaflet@1.0.1/dist/images/marker-icon-2x.png",className:"".concat(ee.marker," ").concat(t?"start":"end")})},X="searchMap",ee={mapContainer:"".concat(X,"-mapContainer"),centralControl:"".concat(X,"-centralControl"),marker:"".concat(X,"-marker"),active:"".concat(X,"-active"),passed:"".concat(X,"-passed")},te={height:"35vh",filter:e=>"dark"===e.palette.mode?"brightness(0.8)":"none",["& .".concat(ee.mapContainer)]:{height:"35vh"},["& .".concat(ee.marker)]:{marginLeft:"-12px",marginTop:"-41px",width:"25px",height:"41px",zIndex:618,outline:"none",filter:"hue-rotate(130deg)","&.lv-1":{filter:"hue-rotate(210deg) brightness(1.5)"},"&.start":{filter:"hue-rotate(30deg)"},"&.end":{filter:"hue-rotate(280deg)"}},["& .".concat(ee.active)]:{animation:"blinker 2s linear infinite"},["& .".concat(ee.passed)]:{filter:"grayscale(100%)"},"& .self-center":{backgroundImage:"url(/self.svg)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",transition:"transform 0.1s ease-out",transformOrigin:"center"}},ne={background:"white",height:"28px",marginBottom:"20px !important",marginRight:"5px !important",["& .".concat(ee.centralControl)]:{padding:"5px",color:"black"}};var ae=n(4395),oe=n(421);const re=()=>{const{t:e}=(0,d.$)();return(0,h.jsxs)(r.Z,{sx:ue,children:[(0,h.jsx)(s.Z,{variant:"h5",children:e("Route Search header")}),(0,h.jsx)(c.Z,{}),(0,h.jsx)(s.Z,{variant:"subtitle1",children:e("Route Search description")}),(0,h.jsx)("br",{}),(0,h.jsx)(s.Z,{variant:"body2",children:e("Route Search constraint")}),(0,h.jsxs)(s.Z,{variant:"body2",children:["1. ",e("Route Search caption 1")]}),(0,h.jsxs)(s.Z,{variant:"body2",children:["2. ",e("Route Search caption 2")]}),(0,h.jsxs)(s.Z,{variant:"body2",children:["3. ",e("Route Search caption 3")]})]})},se=()=>{const{t:e,i18n:t}=(0,d.$)(),{AppTitle:n,geolocation:s,energyMode:c,db:{routeList:u,stopList:p},vibrateDuration:g}=(0,a.useContext)(l.ZP),{locations:m,setLocations:x,status:f,setStatus:b,result:v,setResult:k,resultIdx:w,setResultIdx:Z}=(0,a.useContext)(i.Z),C=(0,a.useRef)(void 0),y=()=>{C.current&&(C.current.terminate(),C.current=void 0)};(0,a.useEffect)((()=>{(0,D.ND)({title:e("\u9ede\u5c0d\u9ede\u8def\u7dda\u641c\u5c0b")+" - "+e(n),description:e("route-search-page-description"),lang:t.language})}),[t.language]),(0,a.useEffect)((()=>{"rendering"===f&&b("ready")}),[v]),(0,a.useEffect)((()=>("waiting"===f&&m.end&&window.Worker&&(y(),C.current=new Worker("/search-worker.js"),C.current.postMessage({routeList:u,stopList:p,start:m.start?m.start.location:s,end:m.end.location,maxDepth:2}),C.current.onmessage=e=>{if("done"===e.data.type)return y(),void b(e.data.count?"rendering":"ready");(e=>{const n=e.reduce(((e,t)=>e.concat(...t.map((e=>["".concat(e.routeId,"/").concat(e.on),"".concat(e.routeId,"/").concat(e.off)])))),[]).filter(((e,t,n)=>n.indexOf(e)===t));Promise.all(n.map((e=>{const[n,a]=e.split("/");return navigator.onLine?(0,ae.Gx)({...u[n],seq:parseInt(a,10),routeStops:u[n].stops,co:Object.keys(u[n].stops),language:t.language}):new Promise((e=>e([])))}))).then((e=>n.filter(((t,n)=>!navigator.onLine||e[n].length&&e[n].reduce(((e,t)=>e||t.eta),null))))).then((t=>{k((n=>[...n,...e.filter((e=>e.reduce(((e,n)=>e&&(-1!==t.indexOf("".concat(n.routeId,"/").concat(n.on))||-1!==t.indexOf("".concat(n.routeId,"/").concat(n.off)))),!0))).map((e=>{let t=m.start?m.start.location:s;return e.map(((e,n)=>{const a=Object.values(u[e.routeId].stops).sort(((e,t)=>t.length-e.length))[0];let o=-1,r=1e5;for(var s=e.on;s<e.off;++s){let e=(0,D.Sp)(p[a[s]].location,t);e<r&&(o=s,r=e)}return t=p[a[e.off]].location,{...e,on:o}}))})).map((e=>[e,e.reduce(((e,t)=>e+t.off-t.on),0)])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))]))}))})(e.data.value.sort(((e,t)=>e.length-t.length)))}),()=>{y()})),[f,m]);const S=e=>{(0,D.tp)(g),setTimeout((()=>{Z({resultIdx:e,stopIdx:[0,0]})}),0)};return(0,h.jsxs)(o.Z,{sx:ce,square:!0,elevation:0,children:[c?null:(0,h.jsx)(Y,{start:m.start?m.start.location:s,end:m.end?m.end.location:null,routes:v[w.resultIdx],stopIdx:w.stopIdx,onMarkerClick:(e,t)=>{const n=v[w.resultIdx].map((e=>e.routeId)).indexOf(e);Z((e=>{const a=[...e.stopIdx];return a[n]=t,{...e,stopIdx:a}}))}}),(0,h.jsxs)(r.Z,{sx:le,children:[(0,h.jsx)(j,{value:m.start,placeholder:e("\u4f60\u7684\u4f4d\u7f6e"),onChange:e=>{x({...m,start:e}),b("waiting"),Z({resultIdx:0,stopIdx:[0,0]}),k([])},stopList:p}),(0,h.jsx)(j,{value:m.end,placeholder:e("\u76ee\u7684\u5730"),onChange:e=>{x({...m,end:e}),e&&b("waiting"),Z({resultIdx:0,stopIdx:[0,0]}),k([])},stopList:p})]}),(0,h.jsx)(r.Z,{sx:c?de:ie,children:m.end?"waiting|rendering".includes(f)&&0===v.length?(0,h.jsx)(oe.u,{}):"ready|waiting|rendering".includes(f)&&v.length?v.map(((e,t)=>(0,h.jsx)(I,{routes:e,idx:t,handleRouteClick:S,expanded:t===w.resultIdx,stopIdx:t===w.resultIdx?w.stopIdx:null},"search-result-".concat(t)))):(0,h.jsx)(h.Fragment,{children:e("\u627e\u4e0d\u5230\u5408\u9069\u7684\u5df4\u58eb\u8def\u7dda")}):(0,h.jsx)(re,{})})]})},ce={background:e=>"dark"===e.palette.mode?e.palette.background.default:"white",overflowY:"hidden",textAlign:"left",width:"100%"},le={marginTop:"2%",padding:"0% 2%"},ie={overflowY:"scroll",height:"calc(100% - 30vh - 76px)"},de={overflowY:"scroll",height:"calc(100% - 76px)"},ue={textAlign:"left",marginTop:"5%",padding:"5%"}}}]);